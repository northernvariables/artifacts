<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Primary Meta Tags -->
  <title>Canadian Federal Politics Survey 2025 | Northern Variables</title>
  <meta name="title" content="Canadian Federal Politics Survey 2025 | Northern Variables">
  <meta name="description" content="Test your knowledge of current Canadian federal bills and learn official party positions. Interactive survey covering C-2, C-10, C-11, C-12 and major policy issues from the 45th Parliament, 1st Session.">
  <meta name="keywords" content="Canadian politics, federal bills, Parliament, C-2, Strong Borders Act, political education, party positions, 45th Parliament, Northern Variables">
  <meta name="author" content="Northern Variables">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://northernvariables.ca/canpoliticssurvey-45-1-16-10-25">
  <meta property="og:title" content="Canadian Federal Politics Survey 2025 | Northern Variables">
  <meta property="og:description" content="Test your knowledge of current Canadian federal bills and learn official party positions. Interactive survey covering C-2, C-10, C-11, C-12 and major policy issues.">
  <meta property="og:image" content="https://northernvariables.ca/northern-variables-2/">
  <meta property="og:image:width" content="235">
  <meta property="og:image:height" content="300">
  <meta property="og:image:alt" content="Northern Variables Logo">
  <meta property="og:site_name" content="Northern Variables">
  <meta property="og:locale" content="en_CA">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://northernvariables.ca/canpoliticssurvey-45-1-16-10-25">
  <meta name="twitter:title" content="Canadian Federal Politics Survey 2025 | Northern Variables">
  <meta name="twitter:description" content="Test your knowledge of current Canadian federal bills and learn official party positions. Interactive survey covering C-2, C-10, C-11, C-12 and major policy issues.">
  <meta name="twitter:image" content="https://northernvariables.ca/northern-variables-2/">
  <meta name="twitter:image:alt" content="Northern Variables Logo">
  <meta name="twitter:creator" content="@northernvar">
  <meta name="twitter:site" content="@northernvar">

  <!-- Threads -->
  <meta property="threads:card" content="summary_large_image">

  <!-- Additional SEO -->
  <link rel="canonical" href="https://northernvariables.ca/canpoliticssurvey-45-1-16-10-25">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  <meta name="revisit-after" content="7 days">

  <!-- Favicon (optional - add your own) -->
  <link rel="icon" type="image/png" href="https://northernvariables.ca/wp-content/uploads/2024/07/cropped-Logo-Northern-Variables-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://northernvariables.ca/wp-content/uploads/2024/07/cropped-Logo-Northern-Variables-192x192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="https://northernvariables.ca/wp-content/uploads/2024/07/cropped-Logo-Northern-Variables-180x180.png">

  <!-- Structured Data / JSON-LD -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Canadian Federal Politics Survey 2025",
      "description": "Interactive educational survey covering current Canadian federal bills and official party positions from the 45th Parliament, 1st Session.",
      "url": "https://northernvariables.ca/canpoliticssurvey-45-1-16-10-25",
      "author": {
        "@type": "Organization",
        "name": "Northern Variables",
        "url": "https://northernvariables.ca",
        "logo": "https://northernvariables.ca/northern-variables-2/"
      },
      "applicationCategory": "EducationalApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "CAD"
      },
      "inLanguage": "en-CA",
      "datePublished": "2025-10-16",
      "keywords": "Canadian politics, federal bills, Parliament, political education, C-2, C-10, C-11, C-12"
    }
  </script>
  
  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    :root {
      --nv-primary: #0f2747;
      --nv-primary-dark: #091a30;
      --nv-primary-mid: #163b6b;
      --nv-accent: #ff6719;
      --nv-accent-dark: #d85612;
      --nv-text: #0f172a;
      --nv-soft: #f1f5f9;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background:
        radial-gradient(circle at top left, rgba(255, 103, 25, 0.08), transparent 55%),
        linear-gradient(180deg, rgba(15, 39, 71, 0.22) 0%, rgba(15, 39, 71, 0.12) 240px, #f4f6fb 100%);
      background-color: #0f2747;
      color: var(--nv-text);
    }

    .nv-header {
      background: linear-gradient(135deg, var(--nv-primary-dark) 0%, var(--nv-primary-mid) 55%, var(--nv-accent) 100%);
      border-bottom: 4px solid rgba(255, 255, 255, 0.25);
      padding: 2.25rem 1.5rem;
      box-shadow: 0 10px 30px rgba(9, 26, 48, 0.25);
    }

    .nv-header-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 3px;
      background: rgba(255, 255, 255, 0.86);
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(9, 26, 48, 0.15);
      backdrop-filter: blur(6px);
    }

    .nv-header-inner img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: inherit;
    }

    .nv-footer {
      background: linear-gradient(120deg, var(--nv-primary-dark) 0%, var(--nv-primary) 60%, var(--nv-accent-dark) 100%);
      color: #f8fafc;
      padding: 2.5rem 1.5rem;
      text-align: center;
      font-size: 0.9rem;
      box-shadow: 0 -12px 24px rgba(15, 39, 71, 0.3);
    }

    .nv-footer a {
      color: #ffd7c2;
      text-decoration: none;
    }

    .nv-footer a:hover {
      color: #ffffff;
    }

    .nv-footer-cta {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.125rem;
      font-weight: 600;
      background: rgba(255, 255, 255, 0.12);
      padding: 0.85rem 1.5rem;
      border-radius: 9999px;
      transition: background 0.2s ease, transform 0.2s ease;
      margin-bottom: 1.75rem;
    }

    .nv-footer-cta:hover {
      background: rgba(255, 255, 255, 0.18);
      transform: translateY(-2px);
    }

  </style>
</head>
<body>
  
  <div class="nv-header">
    <div class="nv-header-inner">
      <img
        src="https://northernvariables.ca/northern-variables-email-banner-2/"
        alt="Northern Variables"
        class="w-full h-auto"
      />
    </div>
  </div>
  
  <div id="root"></div>
  
  <div class="nv-footer">
    <div class="max-w-4xl mx-auto text-center">
      <p style="font-size: 0.85rem; margin-bottom: 1.75rem; letter-spacing: 0.01em;">&copy; 2025 Northern Variables. All rights reserved.</p>

      <a
        href="https://axorc.substack.com"
        target="_blank"
        rel="noopener noreferrer"
        class="nv-footer-cta"
      >
        <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11 22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z"/>
        </svg>
        <span>Visit us on Substack</span>
      </a>
    </div>
  </div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Emoji-based icon helpers keep styling simple while staying framework-agnostic
    const createIconComponent = (symbol) => ({ className, style, ...props }) => (
      <span
        aria-hidden="true"
        className={className}
        style={{ display: 'inline-flex', alignItems: 'center', justifyContent: 'center', lineHeight: 1, ...style }}
        {...props}
      >
        {symbol}
      </span>
    );

    const ChevronRight = createIconComponent('‚Üí');
    const ChevronLeft = createIconComponent('‚Üê');
    const CheckCircle = createIconComponent('‚úì');
    const XCircle = createIconComponent('‚úó');
    const ExternalLink = createIconComponent('‚Üó');
    const Share2 = createIconComponent('üì§');

    const partyBranding = {
      LPC: {
        abbreviation: 'LPC',
        gradient: 'linear-gradient(135deg, #dc2626, #b91c1c)',
        textColor: '#ffffff',
      },
      CPC: {
        abbreviation: 'CPC',
        gradient: 'linear-gradient(135deg, #1d4ed8, #1e3a8a)',
        textColor: '#ffffff',
      },
      NDP: {
        abbreviation: 'NDP',
        gradient: 'linear-gradient(135deg, #ea580c, #c2410c)',
        textColor: '#ffffff',
      },
      BQ: {
        abbreviation: 'BQ',
        gradient: 'linear-gradient(135deg, #0ea5e9, #0284c7)',
        textColor: '#ffffff',
      },
      GPC: {
        abbreviation: 'GPC',
        gradient: 'linear-gradient(135deg, #059669, #047857)',
        textColor: '#ffffff',
      },
    };
const surveyData = {
  "schema_version": "1.0",
  "generated_at_utc": "2025-10-16T00:00:00Z",
  "jurisdiction": "Canada (Federal)",
  "parliament_session": "45th Parliament, 1st Session",
  "sources": [
    {
      "id": 1,
      "citation": "Government of Canada. (2025, June 3). Government of Canada strengthens border security. https://www.canada.ca/en/public-safety-canada/news/2025/06/government-of-canada-strengthens-border-security.html",
      "url": "https://www.canada.ca/en/public-safety-canada/news/2025/06/government-of-canada-strengthens-border-security.html"
    },
    {
      "id": 2,
      "citation": "Shipley, D. (2025, September 17). Strong Borders Act [Debate contribution]. House of Commons Debates. https://openparliament.ca/debates/2025/9/17/doug-shipley-1/only/",
      "url": "https://openparliament.ca/debates/2025/9/17/doug-shipley-1/only/"
    },
    {
      "id": 3,
      "citation": "Kwan, J. (2025, September 16). Strong Borders Act [Debate contribution]. House of Commons Debates. https://openparliament.ca/debates/2025/9/16/jenny-kwan-1/only/",
      "url": "https://openparliament.ca/debates/2025/9/16/jenny-kwan-1/only/"
    },
    {
      "id": 4,
      "citation": "House of Commons. (2025, June 5). Debates (Hansard) No. 9. 45th Parliament, 1st Session. https://www.ourcommons.ca/DocumentViewer/en/45-1/house/sitting-9/hansard",
      "url": "https://www.ourcommons.ca/DocumentViewer/en/45-1/house/sitting-9/hansard"
    },
    {
      "id": 5,
      "citation": "Parliament of Canada. (2025). Bill C-2: Strong Borders Act. LEGISinfo. https://www.parl.ca/legisinfo/en/bill/45-1/c-2",
      "url": "https://www.parl.ca/legisinfo/en/bill/45-1/c-2"
    },
    {
      "id": 6,
      "citation": "House of Commons. (2025, October 7). Debates (Hansard) No. 35. 45th Parliament, 1st Session. https://www.ourcommons.ca/DocumentViewer/en/45-1/house/sitting-35/hansard",
      "url": "https://www.ourcommons.ca/DocumentViewer/en/45-1/house/sitting-35/hansard"
    },
    {
      "id": 7,
      "citation": "Parliament of Canada. (2025). Bill C-10: Commissioner for Modern Treaty Implementation Act. LEGISinfo. https://www.parl.ca/legisinfo/en/bill/45-1/c-10",
      "url": "https://www.parl.ca/legisinfo/en/bill/45-1/c-10"
    },
    {
      "id": 8,
      "citation": "Government of Canada. (2025, September 26). Minister McGuinty introduces legislation to modernize the military justice system. https://www.canada.ca/en/department-national-defence/news/2025/09/minister-mcguinty-introduces-legislation-to-modernize-the-military-justice-system.html",
      "url": "https://www.canada.ca/en/department-national-defence/news/2025/09/minister-mcguinty-introduces-legislation-to-modernize-the-military-justice-system.html"
    },
    {
      "id": 9,
      "citation": "House of Commons. (2025, October 6). Debates (Hansard) No. 34. 45th Parliament, 1st Session. https://www.ourcommons.ca/DocumentViewer/en/45-1/house/sitting-34/hansard",
      "url": "https://www.ourcommons.ca/DocumentViewer/en/45-1/house/sitting-34/hansard"
    },
    {
      "id": 10,
      "citation": "Parliament of Canada. (2025). Bill C-11: Military Justice System Modernization Act. LEGISinfo. https://www.parl.ca/legisinfo/en/bill/13608745",
      "url": "https://www.parl.ca/legisinfo/en/bill/13608745"
    },
    {
      "id": 11,
      "citation": "Government of Canada. (2025, October 8). Government of Canada introduces new streamlined legislation to strengthen border security and keep Canadians safe. https://www.canada.ca/en/public-safety-canada/news/2025/10/government-of-canada-introduces-new-streamlined-legislation-to-strengthen-border-security-and-keep-canadians-safe.html",
      "url": "https://www.canada.ca/en/public-safety-canada/news/2025/10/government-of-canada-introduces-new-streamlined-legislation-to-strengthen-border-security-and-keep-canadians-safe.html"
    },
    {
      "id": 12,
      "citation": "Parliament of Canada. (2025). Bill C-12: Strengthening Canada's Immigration System and Borders Act. LEGISinfo. https://www.parl.ca/legisinfo/en/bill/13632609",
      "url": "https://www.parl.ca/legisinfo/en/bill/13632609"
    },
    {
      "id": 13,
      "citation": "Government of Canada. (2025). Understanding Strengthening Canada's Immigration System and Borders Act, Bill C-12. https://www.canada.ca/en/services/defence/securingborder/strengthen-border-security/understanding-stregthening-canada-immigration-system-borders-act.html",
      "url": "https://www.canada.ca/en/services/defence/securingborder/strengthen-border-security/understanding-stregthening-canada-immigration-system-borders-act.html"
    },
    {
      "id": 14,
      "citation": "Conservative Party of Canada. (2025). Conservatives fight to reform Canada's outdated automatic citizenship rule. https://www.conservative.ca/conservatives-fight-to-reform-canadas-outdated-automatic-citizenship-rule/",
      "url": "https://www.conservative.ca/conservatives-fight-to-reform-canadas-outdated-automatic-citizenship-rule/"
    },
    {
      "id": 15,
      "citation": "New Democratic Party of Canada. (2025). NDP to end landlord money grabs and bring in national rent control. https://www.ndp.ca/news/ndp-end-landlord-money-grabs-and-bring-national-rent-control",
      "url": "https://www.ndp.ca/news/ndp-end-landlord-money-grabs-and-bring-national-rent-control"
    },
    {
      "id": 16,
      "citation": "New Democratic Party of Canada. (2025). National rent control NOW. https://www.ndp.ca/rent-control",
      "url": "https://www.ndp.ca/rent-control"
    },
    {
      "id": 17,
      "citation": "Bloc Qu√©b√©cois. (2025, April 9). Le fran√ßais, langue de la citoyennet√©. https://www.blocquebecois.org/le-francais-langue-de-la-citoyennete/",
      "url": "https://www.blocquebecois.org/le-francais-langue-de-la-citoyennete/"
    },
    {
      "id": 18,
      "citation": "Bloc Qu√©b√©cois. (2025). Politique linguistique : la pr√©rogative qu√©b√©coise [Policy brief]. https://www.blocquebecois.org/wp-content/uploads/2025/04/fiche_technique_-_politique_linguistique.pdf",
      "url": "https://www.blocquebecois.org/wp-content/uploads/2025/04/fiche_technique_-_politique_linguistique.pdf"
    },
    {
      "id": 19,
      "citation": "Green Party of Canada. (2025). Greens call for full transparency on fossil fuel subsidies after PBO unable to complete costing request. https://www.greenparty.ca/en/news/greens-call-for-full-transparency-on-fossil-fuel-subsidies-after-pbo-unable-to-complete-costing-request",
      "url": "https://www.greenparty.ca/en/news/greens-call-for-full-transparency-on-fossil-fuel-subsidies-after-pbo-unable-to-complete-costing-request"
    }
  ],
  "parties": [
    {
      "code": "LPC",
      "name": "Liberal Party of Canada",
      "logo": "https://upload.wikimedia.org/wikipedia/commons/4/4b/Liberal_Party_of_Canada_logo_2011.svg"
    },
    {
      "code": "CPC",
      "name": "Conservative Party of Canada",
      "logo": "https://upload.wikimedia.org/wikipedia/commons/6/60/Conservative_Party_of_Canada_logo_2020.svg"
    },
    {
      "code": "NDP",
      "name": "New Democratic Party",
      "logo": "https://upload.wikimedia.org/wikipedia/commons/6/69/NDP-Logo-2022.svg"
    },
    {
      "code": "BQ",
      "name": "Bloc Qu√©b√©cois",
      "logo": "https://upload.wikimedia.org/wikipedia/commons/4/40/Bloc_Quebecois_logo_2023.svg"
    },
    {
      "code": "GPC",
      "name": "Green Party of Canada",
      "logo": "https://upload.wikimedia.org/wikipedia/en/1/1e/Green_Party_of_Canada_logo_2016.svg"
    }
  ],
  "survey": {
    "bills": [
      {
        "bill_number": "C-2",
        "short_title": "Strong Borders Act",
        "title": "An Act respecting certain measures relating to the security of the border between Canada and the United States and respecting other related security measures",
        "stage": "House ‚Äî Second Reading (in progress)",
        "url": "https://www.parl.ca/LegisInfo/en/bill/45-1/C-2",
        "summary": "Omnibus border-security package intended to modernize enforcement and disrupt transnational crime (e.g., fentanyl, money laundering). Amends multiple statutes to expand/cohere border authorities, strengthen information‚Äësharing, and align with Charter constraints per the government's Charter Statement.",
        "party_positions": {
          "LPC": {
            "stance": "Support (sponsor)", 
            "notes": "Government bill to strengthen border security and tackle organized crime.",
            "source": "Our government made a commitment to keep our communities safe and work with our American partners to strengthen our border. The Strong Borders Act will help us tackle organized crime, and further equip our border and law enforcement agencies with the authorities and resources they need to keep our border secure ‚Äì for both American and Canadian communities. ‚Äì Hon. Gary Anandasangaree, Minister of Public Safety, June 3, 2025",
            "sourceIds": [1]
          },
          "CPC": {
            "stance": "Mixed / seek amendments", 
            "notes": "Conservatives support protecting Canadians but have concerns about privacy and civil liberties provisions.",
            "source": "Conservatives believe in protecting Canadians from transnational crime, illegal trafficking and abuse of our immigration system, but Bill C‚Äë2 contains many troubling provisions related to privacy and civil liberties of Canadians that will be difficult to support without significant amendments. ‚Äì Doug Shipley, MP (CPC), House debate",
            "sourceIds": [2]
          },
          "NDP": {
            "stance": "Concerns about scope and surveillance", 
            "notes": "NDP raises concerns about the omnibus nature and digital surveillance provisions.",
            "source": "The 140‚Äëpage omnibus bill would make sweeping changes across more than 11 existing acts, and it proposes a new framework for digital surveillance of Canadians. ‚Äì Jenny Kwan, MP (NDP), House remarks",
            "sourceIds": [3]
          },
          "BQ":  {
            "stance": "Support referral to committee for study", 
            "notes": "Bloc supports sending the bill to committee for in-depth study.",
            "source": "Les d√©put√©s du Bloc Qu√©b√©cois appuient le renvoi du projet de loi C‚Äë2 en comit√© pour qu'il soit √©tudi√© en profondeur‚Ä¶ ‚Äì Intervention BQ √† la Chambre, deuxi√®me lecture",
            "sourceIds": [4]
          },
          "GPC": {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "At what stage is Bill C‚Äë2 (Strong Borders Act) as of this snapshot?",
            "options": ["First reading", "Second reading in the House", "In the Senate", "Royal Assent"],
            "correct_answer": "Second reading in the House"
          },
          {
            "question": "One aim of C‚Äë2 is to disrupt which type of activity?",
            "options": ["Municipal zoning", "Transnational organized crime and illicit drug flows", "Provincial education curricula", "Municipal transit funding"],
            "correct_answer": "Transnational organized crime and illicit drug flows"
          }
        ]
      },
      {
        "bill_number": "C-10",
        "short_title": "Commissioner for Modern Treaty Implementation Act",
        "title": "An Act respecting the Commissioner for Modern Treaty Implementation",
        "stage": "House ‚Äî Second Reading (in progress)",
        "url": "https://www.parl.ca/LegisInfo/en/bill/45-1/C-10",
        "summary": "Creates an independent Commissioner to monitor and report on the implementation of modern treaties and self‚Äëgovernment agreements, aiming to improve accountability and outcomes under these agreements.",
        "party_positions": {
          "LPC": {
            "stance": "Support (sponsor)", 
            "notes": "Government bill to ensure accountability for modern treaty implementation.",
            "source": "The appointment of a commissioner for modern treaty implementation will ensure this and future governments are held to account for the implementation of modern treaties across Canada. ‚Äì Hon. Rebecca Alty, Minister of Crown‚ÄîIndigenous Relations, House debate, October 7, 2025",
            "sourceIds": [6]
          },
          "CPC": {
            "stance": "Critical of government approach", 
            "notes": "Conservatives argue the government should fulfill existing obligations rather than create another commissioner.",
            "source": "This bill simply provides cover for a government that has failed to uphold modern treaties‚Ä¶ The Liberals do not need another commissioner; they need to do their job. ‚Äì Jamie Schmale, MP (CPC), House debate, October 7, 2025",
            "sourceIds": [6]
          },
          "NDP": {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "",
            "source": "",
            "sourceIds": []
          },
          "BQ":  {
            "stance": "Support as laudable step", 
            "notes": "Bloc views this as a positive accountability mechanism for respecting modern treaties.",
            "source": "C'est une √©tape louable‚Ä¶ un m√©canisme d'imputabilit√© pour faire respecter les trait√©s modernes. ‚Äì S√©bastien Lemire, d√©put√© (BQ), d√©bats √† la Chambre, October 7, 2025",
            "sourceIds": [6]
          },
          "GPC": {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "What new office would C‚Äë10 establish?",
            "options": ["Border Integrity Commissioner", "Commissioner for Modern Treaty Implementation", "Ethics Commissioner", "Elections Commissioner"],
            "correct_answer": "Commissioner for Modern Treaty Implementation"
          },
          {
            "question": "C‚Äë10's focus is primarily on which area?",
            "options": ["Telecommunications fees", "Modern treaties and self‚Äëgovernment agreements", "Banking regulation", "Provincial education policy"],
            "correct_answer": "Modern treaties and self‚Äëgovernment agreements"
          }
        ]
      },
      {
        "bill_number": "C-11",
        "short_title": "Military Justice System Modernization Act",
        "title": "An Act to amend the National Defence Act and other Acts",
        "stage": "House ‚Äî Referred to Committee (Standing Committee on National Defence ‚Äî NDDN)",
        "url": "https://www.parl.ca/LegisInfo/en/bill/45-1/C-11",
        "summary": "Updates the military justice system and related statutes to address recommendations from prior reviews, streamline processes, and enhance accountability and culture change within the Canadian Armed Forces.",
        "party_positions": {
          "LPC": {
            "stance": "Support (sponsor)",
            "notes": "Government frames C‚Äë11 as delivering key military justice reforms recommended by Arbour and Fish.",
            "source": "Canada‚Äôs military justice system must reflect the values of fairness, accountability, and respect that Canadians expect‚Ä¶ we are delivering on recommendations made by former Supreme Court of Canada Justices Arbour and Fish. ‚Äì Hon. David J. McGuinty, Minister of National Defence, news release, September 26, 2025",
            "sourceIds": [7]
          },
          "CPC": {
            "stance": "Raises serious concerns",
            "notes": "Conservatives warn the bill risks undermining justice for the Canadian Armed Forces without changes.",
            "source": "This legislation‚Ä¶ raises serious concerns about the future of justice for our Canadian Armed Forces and the government‚Äôs ability to protect both the victims and the integrity of our military institutions. ‚Äì James Bezan, MP (CPC), second-reading debate, October 6, 2025",
            "sourceIds": [8]
          },
          "NDP": {
            "stance": "Supports reform but seeks safeguards",
            "notes": "NDP urges the victim liaison appointment to be independent of the chain of command.",
            "source": "We know the legislation is sorely needed, and we have noted that the victim liaison officer‚Äôs position would be appointed through the chain of command. I wonder if the minister would be amenable to making sure this appointment is outside the chain of command so that victims can truly be heard. ‚Äì Lori Idlout, MP (NDP), second-reading debate, October 6, 2025",
            "sourceIds": [8]
          },
          "BQ":  {
            "stance": "Supports referral to committee",
            "notes": "Bloc backs moving C‚Äë11 forward so committee can study the reforms in detail.",
            "source": "Le Bloc Qu√©b√©cois appuiera le projet de loi √† cette √©tape pour qu‚Äôil soit √©tudi√© en comit√©. ‚Äì Simon-Pierre Savard-Tremblay, d√©put√© (BQ), deuxi√®me lecture, 6 octobre 2025",
            "sourceIds": [8]
          },
          "GPC": {
            "stance": "No formal caucus position on record as of 2025-10-16",
            "notes": "",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "Which committee is studying C‚Äë11 after second reading?",
            "options": ["FINA", "NDDN (Standing Committee on National Defence)", "SECU", "INDU"],
            "correct_answer": "NDDN (Standing Committee on National Defence)"
          },
          {
            "question": "C‚Äë11's intent includes:",
            "options": ["Changing provincial court rules", "Modernizing elements of the military justice system", "Amending municipal by-laws", "Setting carbon pricing for industry"],
            "correct_answer": "Modernizing elements of the military justice system"
          }
        ]
      },
      {
        "bill_number": "C-12",
        "short_title": "Strengthening Canada's Immigration System and Borders Act",
        "title": "An Act respecting certain measures relating to the security of Canada's borders and the integrity of the Canadian immigration system and respecting other related security measures",
        "stage": "House ‚Äî Second Reading (intro completed; 1st reading on 2025-10-08)",
        "url": "https://www.parl.ca/LegisInfo/en/bill/45-1/C-12",
        "summary": "A streamlined border-and-immigration integrity bill introduced after C‚Äë2 to move priority measures faster. Government says it targets transnational organized crime, illegal fentanyl trafficking, and immigration fraud while protecting rights.",
        "party_positions": {
          "LPC": {
            "stance": "Support (sponsor)", 
            "notes": "Government emphasizes the legislation provides needed tools for border security.",
            "source": "Bill C‚Äë12 will help advance key legislative changes needed now that will further equip our border and law enforcement agencies with the authorities and resources they need‚Ä¶ We are ready to work with our colleagues in Parliament to ensure this important legislation becomes law. ‚Äì Hon. Gary Anandasangaree, Minister of Public Safety, October 8-9, 2025",
            "sourceIds": [11]
          },
          "CPC": {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "Debate not yet underway.",
            "source": "",
            "sourceIds": []
          },
          "NDP": {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "Debate not yet underway.",
            "source": "",
            "sourceIds": []
          },
          "BQ":  {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "",
            "source": "",
            "sourceIds": []
          },
          "GPC": {
            "stance": "No formal caucus position on record as of 2025-10-16", 
            "notes": "",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "When was C‚Äë12 introduced?",
            "options": ["2025-10-08", "2024-06-03", "2024-09-25", "2024-05-26"],
            "correct_answer": "2025-10-08"
          },
          {
            "question": "C‚Äë12 addresses which themes?",
            "options": ["Municipal transit grants", "Border security and immigration system integrity", "Bank capital requirements", "Telecom spectrum auctions"],
            "correct_answer": "Border security and immigration system integrity"
          }
        ]
      }
    ],
    "party_surfaced_urgent_issues": [
      {
        "issue_id": "CPC_birthright_citizenship",
        "label": "End automatic birthright citizenship for children of temporary residents",
        "party_raising": "CPC",
        "url": "https://www.conservative.ca/conservatives-fight-to-reform-canadas-outdated-automatic-citizenship-rule/",
        "what_is_proposed": "Amend the Citizenship Act so citizenship at birth requires at least one parent who is a citizen, permanent resident, or protected person‚Äîaimed at ending 'birth tourism' and reducing strain on systems.",
        "positions_by_party": {
          "CPC": {
            "position": "Supports reform (proposal sponsor).",
            "source": "Right now, anyone born in Canada gets Canadian citizenship ‚Äî even if both parents are only here on short‚Äëterm permits or have no status at all. Canada is now an outlier on this issue. ‚Äì Conservative Party news post",
            "sourceIds": [14]
          },
          "LPC": {
            "position": "No formal caucus position on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "NDP": {
            "position": "No formal caucus position on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "BQ":  {
            "position": "No formal caucus position on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "GPC": {
            "position": "No formal caucus position on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "Which party is promoting changes to birthright citizenship?",
            "options": ["LPC", "CPC", "NDP", "BQ"],
            "correct_answer": "CPC"
          },
          {
            "question": "The CPC proposal would require at least one parent to be:",
            "options": ["Citizen/PR/protected person", "Visitor", "Foreign student only", "None of the above"],
            "correct_answer": "Citizen/PR/protected person"
          }
        ]
      },
      {
        "issue_id": "NDP_renters_national_rent_control",
        "label": "National rent control and renters' protections",
        "party_raising": "NDP",
        "url": "https://www.ndp.ca/news/ndp-end-landlord-money-grabs-and-bring-national-rent-control",
        "what_is_proposed": "Tie federal housing funds to real rent control and tenant protections; ban renovictions/demovictions and rent price‚Äëfixing; recognize tenant unions; advance renters' Bill of Rights.",
        "positions_by_party": {
          "NDP": {
            "position": "Supports these measures strongly.",
            "source": "New Democrats know that a good home is a right ‚Äî not a luxury ‚Ä¶ we're ready to fight to make sure you can afford a safe place to live, raise your kids, and build your future. And we won't stop until we get it done. ‚Äì Jagmeet Singh, party release. Also: Implement national rent control; ban fixed‚Äëterm leases, renovictions, [and] demovictions ‚Ä¶ [and] ban rent price‚Äëfixing and collusion by corporate landlords.",
            "sourceIds": [15, 16]
          },
          "LPC": {
            "position": "No formal caucus position on national rent control on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "CPC": {
            "position": "No formal caucus position on national rent control on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "BQ":  {
            "position": "No formal caucus position on national rent control on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "GPC": {
            "position": "No formal caucus position on national rent control on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "Which party is calling for national rent control tied to federal housing funds?",
            "options": ["LPC", "CPC", "NDP", "BQ"],
            "correct_answer": "NDP"
          },
          {
            "question": "One NDP proposal is to ban:",
            "options": ["Fixed-term leases", "Tenant unions", "Affordable housing", "Social housing"],
            "correct_answer": "Fixed-term leases"
          }
        ]
      },
      {
        "issue_id": "BQ_language_citizenship_quebec",
        "label": "French language protection & Qu√©bec-specific citizenship rules",
        "party_raising": "BQ",
        "url": "https://www.blocquebecois.org/le-francais-langue-de-la-citoyennete/",
        "what_is_proposed": "Exempt Qu√©bec from the federal Official Languages Act and require sufficient French knowledge for obtaining citizenship from within Qu√©bec; defend use of the notwithstanding clause and Qu√©bec jurisdiction.",
        "positions_by_party": {
          "BQ":  {
            "position": "Strongly supports.",
            "source": "Le fran√ßais est la cl√© de l'immigration r√©ussie, l'outil de base de l'int√©gration et de l'inclusion au sein de la soci√©t√© qu√©b√©coise. Le Bloc Qu√©b√©cois s'assurera donc que tous les nouveaux arrivants d√©montrent une connaissance suffisante du fran√ßais pour obtenir la citoyennet√© au Qu√©bec. ‚Äì Yves‚ÄëFran√ßois Blanchet, communiqu√©, April 9, 2025. Also: Le Bloc Qu√©b√©cois travaillera √† soustraire le Qu√©bec √† l'application de la Loi sur les langues officielles pour que le Qu√©bec soit seul ma√Ætre d'≈ìuvre de sa politique linguistique.",
            "sourceIds": [17, 18]
          },
          "LPC": {
            "position": "No formal caucus position on this BQ proposal on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "CPC": {
            "position": "No formal caucus position on this BQ proposal on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "NDP": {
            "position": "No formal caucus position on this BQ proposal on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "GPC": {
            "position": "No formal caucus position on this BQ proposal on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "Which party proposes French knowledge as a requirement for citizenship applications from within Qu√©bec?",
            "options": ["LPC", "CPC", "NDP", "BQ"],
            "correct_answer": "BQ"
          },
          {
            "question": "The BQ's proposal would change:",
            "options": ["Municipal language bylaws", "Application of the federal Official Languages Act in Qu√©bec", "Supreme Court composition", "Monetary policy"],
            "correct_answer": "Application of the federal Official Languages Act in Qu√©bec"
          }
        ]
      },
      {
        "issue_id": "GPC_end_fossil_subsidies_climate_urgency",
        "label": "End fossil‚Äëfuel subsidies and accelerate climate action",
        "party_raising": "GPC",
        "url": "https://www.greenparty.ca/en/news/greens-call-for-full-transparency-on-fossil-fuel-subsidies-after-pbo-unable-to-complete-costing-request",
        "what_is_proposed": "Immediate transparency and phase‚Äëout of fossil‚Äëfuel subsidies; redirect funds to just transition, clean energy, and climate resilience; reinforce national climate plan to meet 2030 targets.",
        "positions_by_party": {
          "GPC": {
            "position": "Strongly supports.",
            "source": "The Greens are committed to ending all fossil fuel subsidies and redirecting those funds toward a just transition for workers and communities, clean energy development, and climate resilience. ‚Äì Green Party news post",
            "sourceIds": [19]
          },
          "LPC": {
            "position": "No formal caucus position on ending all fossil fuel subsidies on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "CPC": {
            "position": "No formal caucus position on ending all fossil fuel subsidies on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "NDP": {
            "position": "No formal caucus position on ending all fossil fuel subsidies on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          },
          "BQ":  {
            "position": "No formal caucus position on ending all fossil fuel subsidies on record as of 2025-10-16.",
            "source": "",
            "sourceIds": []
          }
        },
        "knowledge_checks": [
          {
            "question": "Which party is prioritizing the end of fossil‚Äëfuel subsidies?",
            "options": ["GPC", "CPC", "BQ", "LPC"],
            "correct_answer": "GPC"
          },
          {
            "question": "Green proposals include redirecting funds to:",
            "options": ["Automobile tariffs", "Just transition and clean energy", "Corporate tax holidays", "Defence procurement"],
            "correct_answer": "Just transition and clean energy"
          }
        ]
      }
    ]
  }
};

function CanadianPoliticsSurvey() {
  const [stage, setStage] = useState('intro');
  const [currentSection, setCurrentSection] = useState(0);
  const [currentKnowledgeCheck, setCurrentKnowledgeCheck] = useState(0);
  const [knowledgeAnswers, setKnowledgeAnswers] = useState({});
  const [showFeedback, setShowFeedback] = useState(false);
  const [selectedAnswer, setSelectedAnswer] = useState(null);
  const [completedKnowledge, setCompletedKnowledge] = useState(new Set());
  const [showSourcesModal, setShowSourcesModal] = useState(false);

  const PartyLogo = ({ code, name, size = 'md', className = '' }) => {
    const [errored, setErrored] = useState(false);

    const party = surveyData.parties.find((p) => p.code === code);
    const partyName = name || party?.name || code;
    const branding = partyBranding[code] || {
      abbreviation: code,
      gradient: 'linear-gradient(135deg, #d1d5db, #9ca3af)',
      textColor: '#1f2937',
    };

    const sizeMap = {
      sm: 32,
      md: 40,
      lg: 56,
    };

    const dimension = sizeMap[size] || sizeMap.md;

    useEffect(() => {
      setErrored(false);
    }, [code, party?.logo]);

    const containerBaseClass = `flex-shrink-0 inline-flex items-center justify-center rounded-full shadow-sm ${className}`.trim();
    const containerBaseStyle = {
      width: dimension,
      height: dimension,
      boxShadow: '0 1px 3px rgba(15, 23, 42, 0.15)',
    };

    if (party?.logo && !errored) {
      return (
        <div
          className={containerBaseClass}
          style={{
            ...containerBaseStyle,
            background: '#ffffff',
          }}
        >
          <img
            src={party.logo}
            alt={`${partyName} logo`}
            loading="lazy"
            style={{
              maxWidth: '80%',
              maxHeight: '80%',
              objectFit: 'contain',
              display: 'block',
            }}
            onError={() => setErrored(true)}
          />
        </div>
      );
    }

    return (
      <div
        role="img"
        aria-label={`${partyName} logo`}
        className={`${containerBaseClass} font-semibold uppercase`}
        style={{
          ...containerBaseStyle,
          background: branding.gradient,
          color: branding.textColor,
          fontSize: `${Math.max(12, dimension / 2.6)}px`,
          letterSpacing: '0.05em',
        }}
        title={`${partyName} logo`}
      >
        {branding.abbreviation}
      </div>
    );
  };

  const allItems = [
    ...surveyData.survey.bills.map(b => ({...b, type: 'bill'})),
    ...surveyData.survey.party_surfaced_urgent_issues.map(i => ({...i, type: 'issue'}))
  ];

  const currentItem = allItems[currentSection];
  const totalSections = allItems.length;

  const getPartyName = (code) => {
    const party = surveyData.parties.find(p => p.code === code);
    return party ? party.name : code;
  };

  const handleKnowledgeAnswer = (answer) => {
    setSelectedAnswer(answer);
    setShowFeedback(true);
    
    const itemId = currentItem.type === 'bill' ? currentItem.bill_number : currentItem.issue_id;
    const checkId = `${itemId}_check${currentKnowledgeCheck}`;
    
    setKnowledgeAnswers((prevAnswers) => ({
      ...prevAnswers,
      [checkId]: {
        answer,
        correct: answer === currentItem.knowledge_checks[currentKnowledgeCheck].correct_answer
      }
    }));
  };

  const handleNextKnowledge = () => {
    if (currentKnowledgeCheck < currentItem.knowledge_checks.length - 1) {
      setCurrentKnowledgeCheck((prev) => prev + 1);
      setShowFeedback(false);
      setSelectedAnswer(null);
    } else {
      const itemId = currentItem.type === 'bill' ? currentItem.bill_number : currentItem.issue_id;
      setCompletedKnowledge((prevCompleted) => {
        const updated = new Set(prevCompleted);
        updated.add(itemId);
        return updated;
      });

      if (currentSection < totalSections - 1) {
        setCurrentSection((prev) => prev + 1);
        setCurrentKnowledgeCheck(0);
        setStage('info');
      } else {
        setStage('results');
      }
      
      setShowFeedback(false);
      setSelectedAnswer(null);
    }
  };

  const handlePrevious = () => {
    if (stage === 'knowledge') {
      if (currentKnowledgeCheck > 0) {
        setCurrentKnowledgeCheck((prev) => prev - 1);
        setShowFeedback(false);
        setSelectedAnswer(null);
      } else {
        setStage('info');
      }
    } else if (stage === 'info') {
      if (currentSection > 0) {
        setCurrentSection((prev) => prev - 1);
        setStage('info');
      } else {
        setStage('intro');
      }
    }
  };

  const handleShare = (platform) => {
    const knowledgeScore = Object.values(knowledgeAnswers).filter(a => a.correct).length;
    const totalKnowledge = Object.keys(knowledgeAnswers).length;
    const percentage = totalKnowledge > 0
      ? Math.round((knowledgeScore / totalKnowledge) * 100)
      : 0;
    const surveyUrl = 'https://northernvariables.ca/canpoliticssurvey-45-1-16-10-25';
    
    let shareText = '';
    let shareUrl = '';
    
    if (platform === 'twitter') {
      shareText = `I scored ${percentage}% on the Canadian Federal Politics Survey! Test your knowledge of current bills and party positions. @northernvar`;
      shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(surveyUrl)}`;
    } else if (platform === 'facebook') {
      shareText = `I scored ${percentage}% on the Canadian Federal Politics Survey! Test your knowledge of current bills and party positions. @northernvariables`;
      shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(surveyUrl)}&quote=${encodeURIComponent(shareText)}`;
    } else if (platform === 'threads') {
      shareText = `I scored ${percentage}% on the Canadian Federal Politics Survey! Test your knowledge of current bills and party positions. @northernvariables\n\n${surveyUrl}`;
      shareUrl = `https://threads.net/intent/post?text=${encodeURIComponent(shareText)}`;
    } else if (platform === 'linkedin') {
      shareText = `I scored ${percentage}% on the Canadian Federal Politics Survey! Test your knowledge of current bills and party positions.`;
      const linkedInTitle = 'Canadian Federal Politics Survey 2025 Results';
      shareUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(surveyUrl)}&title=${encodeURIComponent(linkedInTitle)}&summary=${encodeURIComponent(shareText)}`;
    }

    if (!shareUrl) {
      return;
    }

    window.open(shareUrl, '_blank', 'width=600,height=400');
  };

  let content = null;

  if (stage === 'intro') {
    content = (
      <div className="min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-6">
        <div className="max-w-3xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-8">
            <div className="text-center mb-8">
              <h1 className="text-4xl font-bold text-red-700 mb-2">Canadian Federal Politics Survey</h1>
              <p className="text-gray-600">{surveyData.parliament_session}</p>
              <p className="text-sm text-gray-500 mt-2">Snapshot: {new Date(surveyData.generated_at_utc).toLocaleDateString()}</p>
            </div>
            
            <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
              <p className="text-sm font-semibold text-blue-900 mb-2">üìã Data Sources</p>
              <p className="text-sm text-blue-800">
                This survey uses verified quotes from official parliamentary records (Hansard), government news releases, and party policy pages as of October 16, 2025. All bill information is sourced from Parliament of Canada LEGISinfo pages.
              </p>
            </div>
            
            <div className="space-y-4 mb-8">
              <p className="text-lg text-gray-700">
                This interactive survey helps you understand current federal legislation and learn about official party positions on bills and policy issues.
              </p>
              
              <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
                <h3 className="font-semibold text-blue-900 mb-2">What to expect:</h3>
                <ul className="space-y-2 text-blue-800">
                  <li>‚Ä¢ {totalSections} bills and issues from the current parliamentary session</li>
                  <li>‚Ä¢ Knowledge check questions to test your understanding</li>
                  <li>‚Ä¢ Official party positions backed by verified Hansard quotes</li>
                  <li>‚Ä¢ Links to read full bills and policy documents</li>
                </ul>
              </div>
              
              <p className="text-sm text-gray-600">
                This survey covers government bills currently on the Order Paper and urgent issues raised by federal parties. Party positions are based on official statements as of October 16, 2025.
              </p>

              <div className="mt-6">
                <p className="text-sm font-semibold text-gray-700 mb-3">Featuring positions from:</p>
                <div className="flex flex-wrap items-center justify-center gap-6 p-4 bg-gray-50 rounded-lg">
                  {surveyData.parties.map(party => (
                    <div key={party.code} className="flex flex-col items-center gap-2">
                      <PartyLogo code={party.code} name={party.name} size="lg" />
                      <span className="text-xs text-gray-600 text-center max-w-[110px] leading-tight min-h-[2.5rem] flex items-center justify-center">
                        {party.name}
                      </span>
                    </div>
                  ))}
                </div>
              </div>
            </div>
            
            <div className="flex gap-3">
              <button
                onClick={() => setShowSourcesModal(true)}
                className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
              >
                üìö View Sources
              </button>
              <button
                onClick={() => setStage('info')}
                className="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
              >
                Start Survey
                <ChevronRight className="w-5 h-5" />
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  } else if (stage === 'results') {
    const knowledgeScore = Object.values(knowledgeAnswers).filter(a => a.correct).length;
    const totalKnowledge = Object.keys(knowledgeAnswers).length;
    const knowledgePercentage = totalKnowledge > 0
      ? Math.round((knowledgeScore / totalKnowledge) * 100)
      : 0;
    const sectionsCompleted = completedKnowledge.size;

    content = (
      <div className="min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-6">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-8">
            <h1 className="text-3xl font-bold text-red-700 mb-6">Your Results</h1>
            
            <div className="grid md:grid-cols-2 gap-6 mb-8">
              <div className="bg-blue-50 rounded-lg p-6">
                <h3 className="text-lg font-semibold text-blue-900 mb-2">Knowledge Score</h3>
                <p className="text-4xl font-bold text-blue-700">{knowledgeScore}/{totalKnowledge}</p>
                <p className="text-sm text-blue-600 mt-2">
                  {knowledgePercentage}% correct
                </p>
              </div>
              
              <div className="bg-green-50 rounded-lg p-6">
                <h3 className="text-lg font-semibold text-green-900 mb-2">Survey Completion</h3>
                <p className="text-4xl font-bold text-green-700">{sectionsCompleted}/{totalSections}</p>
                <p className="text-sm text-green-600 mt-2">sections completed</p>
              </div>
            </div>

            <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 mb-6">
              <div className="flex items-center gap-2 mb-4">
                <Share2 className="w-5 h-5 text-blue-700" />
                <h3 className="text-lg font-semibold text-gray-900">Share Your Results</h3>
              </div>
              <p className="text-sm text-gray-700 mb-4">
                Share your knowledge score and help others learn about Canadian federal politics!
              </p>
              <div className="flex flex-wrap gap-3">
                <button
                  onClick={() => handleShare('twitter')}
                  className="flex-1 min-w-[140px] bg-black hover:bg-gray-800 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                  <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                  </svg>
                  Share on X
                </button>
                <button
                  onClick={() => handleShare('facebook')}
                  className="flex-1 min-w-[140px] bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                  <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                  </svg>
                  Share on Facebook
                </button>
                <button
                  onClick={() => handleShare('threads')}
                  className="flex-1 min-w-[140px] bg-gradient-to-r from-[#262626] via-[#1d1d1d] to-[#000000] hover:from-[#3a3a3a] hover:via-[#2b2b2b] hover:to-[#111111] text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                  <svg className="w-5 h-5" viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M256 32C132.3 32 32 132.3 32 256s100.3 224 224 224 224-100.3 224-224S379.7 32 256 32Zm80 171.8c-14.3-10.7-33.8-17.9-55.4-20.4 1.1 9.7 1.8 20.8 2 33.5 14.5 3.3 26.2 9 34.2 16.7 9.2 9 13.5 21.1 12.5 36.1-1 15.3-6.9 27.2-17.5 35.3-9.9 7.6-23.4 11.4-40.1 11.4-17.5 0-31.9-4.7-42.7-14-11.1-9.5-17.1-22.8-18-40-1-17.8 3.7-31.8 14-41.6 7.1-6.7 16.5-11.3 28.1-13.7-.2-12.4-.8-23-1.8-32.1-34.7 4.7-61.4 17.9-79.4 39.2-18.6 22-27.1 50.8-25.3 85.6 1.8 34.7 14.3 62.1 37.2 81.5 22 18.6 51.8 28 88.7 28 36.6 0 65.5-9.9 86-29.4 21.4-20.4 32.7-46.5 34.1-78.8 1.3-31.4-6.9-57.2-24.6-76.3Z" />
                  </svg>
                  Share on Threads
                </button>
                <button
                  onClick={() => handleShare('linkedin')}
                  className="flex-1 min-w-[140px] bg-[#0a66c2] hover:bg-[#0d4f92] text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                  <svg className="w-5 h-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M20.452 20.452h-3.554v-5.569c0-1.328-.024-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.356V9h3.413v1.561h.047c.476-.9 1.637-1.852 3.37-1.852 3.603 0 4.268 2.373 4.268 5.457v6.286zM5.337 7.433a2.062 2.062 0 1 1 0-4.124 2.062 2.062 0 0 1 0 4.124zM7.114 20.452H3.56V9h3.554v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.226.792 24 1.771 24h20.451C23.2 24 24 23.226 24 22.271V1.729C24 .774 23.2 0 22.225 0z" />
                  </svg>
                  Share on LinkedIn
                </button>
              </div>
            </div>
            
            <div className="flex gap-3">
              <button
                onClick={() => setShowSourcesModal(true)}
                className="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
              >
                üìö Sources Used
              </button>
              <button
                onClick={() => {
                  setStage('intro');
                  setCurrentSection(0);
                  setCurrentKnowledgeCheck(0);
                  setKnowledgeAnswers({});
                  setCompletedKnowledge(() => new Set());
                }}
                className="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
              >
                Restart Survey
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  } else if (stage === 'info') {
    content = (
      <div className="min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-6">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-8">
            <div className="mb-6">
              <div className="flex justify-between items-center mb-2">
                <span className="text-sm font-semibold text-red-600">
                  {currentSection + 1} of {totalSections}
                </span>
                <span className="text-sm text-gray-500">{currentItem.type === 'bill' ? 'Bill' : 'Issue'}</span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2">
                <div
                  className="bg-red-600 h-2 rounded-full transition-all duration-300"
                  style={{width: `${((currentSection + 1) / totalSections) * 100}%`}}
                />
              </div>
            </div>

            {currentItem.type === 'bill' ? (
              <>
                <h1 className="text-3xl font-bold text-gray-900 mb-2">
                  Bill {currentItem.bill_number}
                </h1>
                <h2 className="text-xl font-semibold text-red-700 mb-4">
                  {currentItem.short_title}
                </h2>
                <p className="text-gray-600 italic mb-4">{currentItem.title}</p>
                
                <div className="flex gap-3 mb-4">
                  <div className="flex-1 bg-blue-50 rounded-lg p-4">
                    <p className="text-sm font-semibold text-blue-900 mb-1">Current Stage:</p>
                    <p className="text-blue-800">{currentItem.stage}</p>
                  </div>
                  {currentItem.url && (
                    <a
                      href={currentItem.url}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2 h-fit self-center"
                    >
                      Read Full Bill
                      <ExternalLink className="w-4 h-4" />
                    </a>
                  )}
                </div>
                
                <div className="mb-6">
                  <h3 className="font-semibold text-gray-900 mb-2">Summary:</h3>
                  <p className="text-gray-700 leading-relaxed">{currentItem.summary}</p>
                </div>

                <div className="mb-6">
                  <h3 className="font-semibold text-gray-900 mb-3">Party Positions:</h3>
                  <div className="space-y-3">
                    {Object.entries(currentItem.party_positions).map(([code, pos]) => (
                      <div key={code} className="bg-gray-50 rounded-lg p-4">
                        <div className="flex justify-between items-start mb-2">
                          <div className="flex items-center gap-3">
                            <PartyLogo code={code} name={getPartyName(code)} size="sm" />
                            <span className="font-semibold text-gray-800">{getPartyName(code)}</span>
                          </div>
                          <span className="text-sm px-2 py-1 bg-red-100 text-red-700 rounded">
                            {pos.stance}
                          </span>
                        </div>
                        <p className="text-sm text-gray-600 mb-2">{pos.notes}</p>
                        {pos.source && (
                          <div className="bg-white border-l-4 border-blue-400 p-3 mt-2">
                            <p className="text-xs text-gray-500 mb-1 font-semibold">Source:</p>
                            <p className="text-sm text-gray-700 italic">
                              "{pos.source}"
                              {pos.sourceIds && pos.sourceIds.length > 0 && (
                                <span className="ml-1">
                                  {pos.sourceIds.map((id, idx) => (
                                    <button
                                      key={id}
                                      onClick={() => setShowSourcesModal(true)}
                                      className="text-blue-600 hover:text-blue-800 font-semibold align-super text-xs cursor-pointer"
                                      title="View source citation"
                                    >
                                      [{id}]
                                    </button>
                                  ))}
                                </span>
                              )}
                            </p>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              </>
            ) : (
              <>
                <h1 className="text-3xl font-bold text-gray-900 mb-4">
                  {currentItem.label}
                </h1>
                
                <div className="flex gap-3 mb-6">
                  <div className="flex-1 bg-purple-50 rounded-lg p-4">
                    <p className="text-sm font-semibold text-purple-900 mb-2">Raised by:</p>
                    <div className="flex items-center gap-3">
                      <PartyLogo code={currentItem.party_raising} name={getPartyName(currentItem.party_raising)} size="sm" />
                      <p className="text-purple-800 font-semibold">{getPartyName(currentItem.party_raising)}</p>
                    </div>
                  </div>
                  {currentItem.url && (
                    <a
                      href={currentItem.url}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2 h-fit self-center"
                    >
                      Learn More
                      <ExternalLink className="w-4 h-4" />
                    </a>
                  )}
                </div>
                
                <div className="mb-6">
                  <h3 className="font-semibold text-gray-900 mb-2">What is Proposed:</h3>
                  <p className="text-gray-700 leading-relaxed">{currentItem.what_is_proposed}</p>
                </div>

                <div className="mb-6">
                  <h3 className="font-semibold text-gray-900 mb-3">Party Positions:</h3>
                  <div className="space-y-3">
                    {Object.entries(currentItem.positions_by_party).map(([code, pos]) => (
                      <div key={code} className="bg-gray-50 rounded-lg p-4">
                        <div className="flex items-center gap-3 mb-2">
                          <PartyLogo code={code} name={getPartyName(code)} size="sm" />
                          <span className="font-semibold text-gray-800">{getPartyName(code)}</span>
                        </div>
                        <p className="text-sm text-gray-600 mb-2">{pos.position}</p>
                        {pos.source && (
                          <div className="bg-white border-l-4 border-blue-400 p-3 mt-2">
                            <p className="text-xs text-gray-500 mb-1 font-semibold">Source:</p>
                            <p className="text-sm text-gray-700 italic">
                              "{pos.source}"
                              {pos.sourceIds && pos.sourceIds.length > 0 && (
                                <span className="ml-1">
                                  {pos.sourceIds.map((id, idx) => (
                                    <button
                                      key={id}
                                      onClick={() => setShowSourcesModal(true)}
                                      className="text-blue-600 hover:text-blue-800 font-semibold align-super text-xs cursor-pointer"
                                      title="View source citation"
                                    >
                                      [{id}]
                                    </button>
                                  ))}
                                </span>
                              )}
                            </p>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              </>
            )}

            <div className="mb-4 text-center">
              <button
                onClick={() => setShowSourcesModal(true)}
                className="text-blue-600 hover:text-blue-800 text-sm underline"
              >
                üìö View All Sources
              </button>
            </div>

            <div className="flex gap-3">
              {currentSection > 0 && (
                <button
                  onClick={handlePrevious}
                  className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                  <ChevronLeft className="w-5 h-5" />
                  Previous
                </button>
              )}
              <button
                onClick={() => {
                  const itemId = currentItem.type === 'bill' ? currentItem.bill_number : currentItem.issue_id;
                  if (completedKnowledge.has(itemId)) {
                    if (currentSection < totalSections - 1) {
                      setCurrentSection((prev) => prev + 1);
                      setStage('info');
                    } else {
                      setStage('results');
                    }
                  } else {
                    setStage('knowledge');
                  }
                }}
                className="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
              >
                {(() => {
                  const itemId = currentItem.type === 'bill' ? currentItem.bill_number : currentItem.issue_id;
                  if (completedKnowledge.has(itemId)) {
                    return currentSection < totalSections - 1 ? 'Next Section' : 'View Results';
                  }
                  return 'Continue to Knowledge Check';
                })()}
                <ChevronRight className="w-5 h-5" />
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  } else if (stage === 'knowledge') {
    const check = currentItem.knowledge_checks[currentKnowledgeCheck];
    const isCorrect = selectedAnswer === check.correct_answer;

    content = (
      <div className="min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-6">
        <div className="max-w-3xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-8">
            <div className="mb-6">
              <div className="flex justify-between items-center mb-2">
                <span className="text-sm font-semibold text-red-600">
                  Knowledge Check {currentKnowledgeCheck + 1} of {currentItem.knowledge_checks.length}
                </span>
              </div>
            </div>

            <div className="mb-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">
                {check.question}
              </h2>

              <div className="space-y-3">
                {check.options.map((option, idx) => (
                  <button
                    key={idx}
                    onClick={() => !showFeedback && handleKnowledgeAnswer(option)}
                    disabled={showFeedback}
                    className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                      showFeedback
                        ? option === check.correct_answer
                          ? 'border-green-500 bg-green-50'
                          : option === selectedAnswer
                          ? 'border-red-500 bg-red-50'
                          : 'border-gray-200 bg-gray-50'
                        : 'border-gray-300 hover:border-red-500 hover:bg-red-50'
                    } ${showFeedback ? 'cursor-default' : 'cursor-pointer'}`}
                  >
                    <div className="flex items-center justify-between">
                      <span className="text-gray-800">{option}</span>
                      {showFeedback && option === check.correct_answer && (
                        <CheckCircle className="w-6 h-6 text-green-600" />
                      )}
                      {showFeedback && option === selectedAnswer && option !== check.correct_answer && (
                        <XCircle className="w-6 h-6 text-red-600" />
                      )}
                    </div>
                  </button>
                ))}
              </div>
            </div>

            {!showFeedback && currentKnowledgeCheck === 0 && (
              <button
                onClick={handlePrevious}
                className="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 mb-4"
              >
                <ChevronLeft className="w-5 h-5" />
                Back to Review
              </button>
            )}

            {showFeedback && (
              <div className={`mb-6 p-4 rounded-lg border-l-4 ${
                isCorrect ? 'bg-green-50 border-green-500' : 'bg-yellow-50 border-yellow-500'
              }`}>
                <p className={`font-semibold ${isCorrect ? 'text-green-900' : 'text-yellow-900'}`}>
                  {isCorrect ? '‚úì Correct!' : 'Not quite.'}
                </p>
                {!isCorrect && (
                  <p className="text-sm text-yellow-800 mt-1">
                    The correct answer is: {check.correct_answer}
                  </p>
                )}
              </div>
            )}

            {showFeedback && (
              <div className="flex gap-3">
                {currentKnowledgeCheck > 0 && (
                  <button
                    onClick={handlePrevious}
                    className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                  >
                    <ChevronLeft className="w-5 h-5" />
                    Previous
                  </button>
                )}
                <button
                  onClick={handleNextKnowledge}
                  className="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                  {currentKnowledgeCheck < currentItem.knowledge_checks.length - 1 ? 'Next Question' : (currentSection < totalSections - 1 ? 'Next Section' : 'View Results')}
                  <ChevronRight className="w-5 h-5" />
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    );
  }

  return (
    <>
      {content}
      {showSourcesModal && (
        <SourcesModal
          isOpen={showSourcesModal}
          onClose={() => setShowSourcesModal(false)}
          sources={surveyData.sources}
        />
      )}
    </>
  );
}

// Sources Modal Component
const SourcesModal = ({ isOpen, onClose, sources }) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4" onClick={onClose}>
      <div className="bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden" onClick={(e) => e.stopPropagation()}>
        <div className="bg-red-600 text-white p-6 flex justify-between items-center">
          <h2 className="text-2xl font-bold">Sources Used</h2>
          <button
            onClick={onClose}
            className="text-white hover:text-gray-200 text-3xl font-bold leading-none"
            aria-label="Close"
          >
            √ó
          </button>
        </div>
        
        <div className="p-6 overflow-y-auto max-h-[calc(90vh-140px)]">
          <p className="text-gray-700 mb-6">
            All information in this survey is sourced from official parliamentary records, government communications, and verified party statements. Citations follow APA style.
          </p>
          
          <div className="space-y-4">
            {sources.map((source) => (
              <div key={source.id} className="border-l-4 border-blue-500 pl-4 py-2 bg-gray-50 rounded">
                <div className="flex items-start gap-3">
                  <span className="font-bold text-blue-600 text-lg">[{source.id}]</span>
                  <div className="flex-1">
                    <p className="text-sm text-gray-800 mb-2">{source.citation}</p>
                    {source.url && (
                      <a
                        href={source.url}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="text-xs text-blue-600 hover:text-blue-800 underline flex items-center gap-1"
                      >
                        <ExternalLink className="w-3 h-3" />
                        Visit Source
                      </a>
                    )}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
        
        <div className="bg-gray-50 p-4 border-t border-gray-200">
          <button
            onClick={onClose}
            className="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<CanadianPoliticsSurvey />);
  </script>
  
</body>
</html>

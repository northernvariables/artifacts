import{r as p,a as ne,R as oe}from"./react-vendor.KfUPlHYY.js";import{R as B,B as K,C as F,X as V,Y as W,T as z,L as Q,a as G,b as Y,S as ae,Z as ie,c as de}from"./recharts-vendor.ORkDpjzq.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var se={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=p,me=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),he=Object.prototype.hasOwnProperty,ue=ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pe={key:!0,ref:!0,__self:!0,__source:!0};function re(s,r,t){var i,o={},l=null,a=null;t!==void 0&&(l=""+t),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(a=r.ref);for(i in r)he.call(r,i)&&!pe.hasOwnProperty(i)&&(o[i]=r[i]);if(s&&s.defaultProps)for(i in r=s.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return{$$typeof:me,type:s,key:l,ref:a,props:o,_owner:ue.current}}U.Fragment=xe;U.jsx=re;U.jsxs=re;se.exports=U;var e=se.exports,H={},Z=ne;H.createRoot=Z.createRoot,H.hydrateRoot=Z.hydrateRoot;const ge=({className:s="",linkTo:r="main"})=>{const t=r==="main"?"/":"https://artifacts.northernvariables.ca";return e.jsx("header",{className:`nv-header ${s}`,style:{background:"linear-gradient(135deg, #091a30 0%, #163b6b 55%, #ff6719 100%)",borderBottom:"4px solid rgba(255, 255, 255, 0.25)",padding:"2.25rem 1.5rem",boxShadow:"0 10px 30px rgba(9, 26, 48, 0.25)"},children:e.jsx("div",{className:"nv-header-inner",style:{maxWidth:"360px",margin:"0 auto",padding:"3px",background:"rgba(255, 255, 255, 0.86)",borderRadius:"1rem",overflow:"hidden",boxShadow:"0 12px 30px rgba(9, 26, 48, 0.15)",backdropFilter:"blur(6px)"},children:e.jsx("a",{href:t,style:{display:"block",borderRadius:"inherit"},"aria-label":"Northern Variables Home",children:e.jsx("img",{src:"https://northernvariables.ca/wp-content/uploads/2025/10/Northern-Variables.jpg",alt:"Northern Variables logo",style:{display:"block",width:"100%",height:"auto",borderRadius:"inherit"}})})})})},be=({className:s="",year:r=new Date().getFullYear(),customLinks:t})=>{const o=t||[{label:"Northern Variables",sublabel:"Website",href:"https://northernvariables.ca/",isExternal:!0,scaleIcon:!0,icon:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm6.93 8h-2.764c-.186-2.278-.891-4.312-1.983-5.712A8.027 8.027 0 0 1 18.93 10zM12 4.063c1.155 1.251 1.946 3.52 2.119 5.937H9.881C10.054 7.583 10.845 5.314 12 4.063zM4.5 14a7.95 7.95 0 0 1 0-4h2.708a17.69 17.69 0 0 0 0 4H4.5zm.57 2h2.764c.186 2.278.89 4.312 1.983 5.712A8.027 8.027 0 0 1 5.07 16zm2.764-8H5.07A8.027 8.027 0 0 1 9.317 4.288C8.224 5.688 7.52 7.722 7.334 10zM12 19.937c-1.155-1.251-1.946-3.52-2.119-5.937h4.238C13.946 16.417 13.155 18.686 12 19.937zM14.119 14H9.881a15.73 15.73 0 0 1 0-4h4.238a15.73 15.73 0 0 1 0 4zm.567 5.712c1.093-1.4 1.797-3.434 1.983-5.712h2.764a8.027 8.027 0 0 1-4.747 5.712z"})})},{label:"Northern Variables",sublabel:"Substack",href:"https://axorc.substack.com",isExternal:!0,icon:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 4.75C4 3.784 4.784 3 5.75 3h12.5C19.216 3 20 3.784 20 4.75v2.5c0 .966-.784 1.75-1.75 1.75H5.75C4.784 9 4 8.216 4 7.25v-2.5Zm0 5.75 8 4.5 8-4.5v8.75A1.75 1.75 0 0 1 18.25 21H5.75A1.75 1.75 0 0 1 4 19.25V10.5Zm8 2.75L4 8.75V7.25C4 6.284 4.784 5.5 5.75 5.5h12.5C19.216 5.5 20 6.284 20 7.25v1.5l-8 4.5Z"})})},{label:"Artifacts Library",sublabel:"Explore",href:"https://artifacts.northernvariables.ca/",isExternal:!1,scaleIcon:!0,icon:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.75 6.25 12 2l7.25 4.25v8.5L12 19l-7.25-4.25v-8.5Zm2.5 1.443v5.365L12 15.69l4.75-2.632V7.693L12 5.06 7.25 7.693ZM12 22l-7.25-4.25 1.5-.879L12 20.25l5.75-3.379 1.5.879L12 22Z"})})}];return e.jsx("footer",{className:`nv-footer ${s}`,style:{background:"linear-gradient(120deg, #091a30 0%, #0f2747 60%, #d85612 100%)",color:"#f8fafc",padding:"2.5rem 1.5rem",textAlign:"center",fontSize:"0.9rem",boxShadow:"0 -12px 24px rgba(15, 39, 71, 0.3)"},children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"nv-footer-links",style:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:"1rem",flexWrap:"nowrap",overflowX:"auto",paddingBottom:"0.5rem",marginBottom:"1.25rem"},children:o.map((l,a)=>e.jsxs("a",{href:l.href,target:l.isExternal?"_blank":"_self",rel:l.isExternal?"noopener noreferrer":void 0,className:"nv-footer-link",style:{display:"inline-flex",alignItems:"center",gap:"0.65rem",padding:"0.65rem 1.25rem",borderRadius:"9999px",background:"rgba(255, 255, 255, 0.08)",fontWeight:600,letterSpacing:"0.02em",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.18)",transition:"background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease",whiteSpace:"nowrap",color:"#ffd7c2",textDecoration:"none"},children:[e.jsx("span",{className:`nv-footer-link-icon ${l.scaleIcon?"nv-footer-link-icon--scale":""}`,"aria-hidden":"true",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1.5rem",height:"1.5rem",borderRadius:"9999px",background:"rgba(15, 23, 42, 0.18)",color:"#fff7ed",boxShadow:"0 4px 10px rgba(15, 23, 42, 0.2)"},children:e.jsx("span",{style:{width:"1rem",height:"1rem",display:"inline-flex",transform:l.scaleIcon?"scale(1.18)":"scale(1)"},children:l.icon})}),e.jsxs("span",{className:"nv-footer-link-text",style:{display:"inline-flex",flexDirection:"column",alignItems:"flex-start",lineHeight:1.2},children:[e.jsx("span",{children:l.label}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500,letterSpacing:"0.08em",textTransform:"uppercase",opacity:.85},children:l.sublabel})]})]},a))}),e.jsxs("p",{style:{fontSize:"0.85rem",letterSpacing:"0.01em"},children:["© ",r," Northern Variables. All rights reserved."]})]})})},fe=({onStart:s})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Canadian Vote Spectrum"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Discover where you stand on the Canadian political spectrum"})]}),e.jsxs("div",{className:"space-y-4 mb-8 text-gray-700",children:[e.jsx("p",{children:"This comprehensive voting advice instrument will help you understand your political positioning across multiple dimensions including economic policy, social values, climate priorities, and more."}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded",children:[e.jsx("p",{className:"font-semibold mb-2",children:"What to expect:"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:"36 federal policy questions including current events & controversial issues"}),e.jsx("li",{children:"Up to 12 province-specific questions"}),e.jsx("li",{children:"Mark questions as very important for personalized weighting"}),e.jsx("li",{children:"Educational facts about Canadian politics"}),e.jsx("li",{children:"Progress milestones to keep you motivated"}),e.jsx("li",{children:"Priority weighting exercise across 12 issue areas"}),e.jsx("li",{children:"Detailed breakdown showing WHY you matched with each party"}),e.jsx("li",{children:"Consistency analysis of your responses"}),e.jsx("li",{children:"Personalized results with party alignment & 2D positioning"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Time estimate:"})," 15-20 minutes",e.jsx("strong",{className:"ml-2",children:"Privacy:"})," Your responses are private and never tracked. At the end, you can optionally contribute anonymized data for research."]})]}),e.jsx("button",{onClick:s,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors duration-200 shadow-lg",children:"Get Started"})]})}),ye=["BC","AB","SK","MB","ON","QC","NB","NS","PE","NL","YT","NT","NU"],je=({onSelectProvince:s})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-xl w-full bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Select Your Province"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This helps us show you relevant provincial questions."}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ye.map(r=>e.jsx("button",{onClick:()=>s(r),className:"py-3 px-4 border-2 border-gray-200 hover:border-red-600 hover:bg-red-50 rounded-lg font-medium transition-all duration-200",children:r},r))})]})}),Ne=["Liberal","Conservative","NDP","Bloc Quebecois","Green","PPC","Other/Did not vote","Prefer not to say"],ve=({pastVote2021:s,onSelectPastVote:r,onContinue:t})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"One More Question"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This helps us calibrate your results more accurately."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Which party did you vote for in the 2021 federal election? (Optional)"}),e.jsx("div",{className:"space-y-3",children:Ne.map(i=>e.jsx("button",{onClick:()=>r(i),className:`w-full py-3 px-6 rounded-lg border-2 transition-all duration-200 text-left font-medium ${s===i?"border-red-600 bg-red-50 text-red-900":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:i},i))})]}),e.jsx("button",{onClick:t,className:"w-full py-4 px-6 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors",children:"Continue to Questions"})]})}),we=new Set(["YT","NT","NU"]),X=["Canada has had 23 Prime Ministers since Confederation in 1867.","The longest-serving PM was William Lyon Mackenzie King (21 years).","Canada's Senate has 105 appointed members who serve until age 75.","The Bloc Quebecois only runs candidates in Quebec ridings.","Canada uses a first-past-the-post electoral system.","Federal elections must be held at least every 5 years.","The Governor General formally appoints the Prime Minister.","Quebec has 78 federal seats, the second-most after Ontario's 121.","A party needs 172 seats to form a majority government in Canada's 343-seat House of Commons.","Canada held a referendum on electoral reform in British Columbia in 2018 - it was defeated.","The Clarity Act (2000) sets conditions for Quebec separation referendums.","Supply management has protected Canadian dairy farmers since the 1970s.","Canada's current voting system was established in 1867 and has never changed.","The notwithstanding clause has been used over 50 times by provincial governments.","About 75% of Canadians live within 100 miles of the US border.","Canada-US trade exceeds $900 billion annually, making it the world's largest bilateral trade relationship.","The US accounts for about 75% of Canada's total exports.","CRTC regulations require Canadian radio stations to play at least 35% Canadian content."],J=[{value:0,label:"Strongly Disagree",short:"SD"},{value:25,label:"Disagree",short:"D"},{value:50,label:"Neutral",short:"N"},{value:75,label:"Agree",short:"A"},{value:100,label:"Strongly Agree",short:"SA"}],Ee=s=>s<=10?"Strongly Disagree":s<=35?"Disagree":s<=65?"Neutral":s<=90?"Agree":"Strongly Agree",Se=({province:s,questions:r,currentQuestionIndex:t,responses:i,questionImportance:o,showMilestone:l,milestoneMessage:a,onToggleImportance:b,onResponseChange:m,onSkip:x,onNext:u,onPrevious:N,onRestart:v})=>{const f=r[t],_=p.useMemo(()=>r.length?(t+1)/r.length*100:0,[t,r.length]),S=f?i[f.qid]??50:50,h=f?!!o[f.qid]:!1,j=X[t%X.length],M=p.useMemo(()=>!f||f.jurisdiction!=="provincial"?[]:!s||!Array.isArray(f.province_gate)?[]:f.province_gate.filter(y=>y===s),[f,s]);return!r.length||!f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("p",{className:"text-xl text-gray-900 mb-4",children:"Loading questions..."}),e.jsx("button",{onClick:v,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold",children:"Restart"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-4 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsxs("span",{children:["Question ",t+1," of ",r.length]}),e.jsxs("span",{children:[Math.round(_),"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 relative",style:{height:"900px"},children:[e.jsxs("div",{className:"h-[800px] overflow-y-auto",children:[e.jsxs("div",{className:"mb-8 h-[16rem]",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:f.issue_bucket.replace(/_/g," ").toUpperCase()}),f.jurisdiction==="provincial"&&M.map(y=>e.jsxs("span",{className:"inline-block px-3 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full",children:[y," ",we.has(y)?"TERRITORIAL":"PROVINCIAL"]},y))]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 h-[10rem] flex items-start overflow-y-auto",children:f.text}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("button",{onClick:()=>b(f.qid,!h),className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 transition-all duration-200 ${h?"border-yellow-500 bg-yellow-50 text-yellow-800":"border-gray-300 text-gray-600 hover:border-yellow-400"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:h?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),h?"Very Important to Me":"Mark as Important"]})})]}),e.jsxs("div",{className:"space-y-6 h-[420px]",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block px-6 py-3 bg-red-600 text-white rounded-full text-xl font-bold mb-2",children:Ee(S)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Position: ",S]})]}),e.jsxs("div",{className:"px-2",children:[e.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:S,onChange:y=>m(f.qid,Number(y.target.value)),className:"w-full h-3 bg-gradient-to-r from-red-600 via-gray-300 to-blue-600 rounded-lg appearance-none cursor-pointer slider",style:{background:"linear-gradient(to right, #DC2626 0%, #EF4444 20%, #D1D5DB 40%, #D1D5DB 60%, #3B82F6 80%, #2563EB 100%)"}}),e.jsx("style",{children:`
                  .slider::-webkit-slider-thumb {
                    appearance: none;
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                    background: white;
                    border: 4px solid #DC2626;
                    cursor: pointer;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                  }
                  .slider::-webkit-slider-thumb:hover {
                    transform: scale(1.15);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
                  }
                  .slider::-webkit-slider-thumb:active {
                    transform: scale(1.05);
                  }
                  .slider::-moz-range-thumb {
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                    background: white;
                    border: 4px solid #DC2626;
                    cursor: pointer;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                  }
                  .slider::-moz-range-thumb:hover {
                    transform: scale(1.15);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
                  }
                  .slider::-moz-range-thumb:active {
                    transform: scale(1.05);
                  }
                `})]}),e.jsx("div",{className:"flex justify-between text-xs text-gray-600 px-2",children:J.map(({value:y,label:k})=>e.jsx("span",{className:"font-semibold text-center",children:k.split(" ").map((w,R)=>e.jsxs(oe.Fragment,{children:[R>0&&e.jsx("br",{}),w]},`${y}-${w}-${R}`))},y))}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mt-4",children:J.map(({value:y,short:k})=>e.jsx("button",{onClick:()=>m(f.qid,y),className:`py-2 px-3 rounded-lg border-2 font-semibold text-sm transition-all duration-200 ${Math.abs(S-y)<=12?"border-red-600 bg-red-50 text-red-900":"border-gray-200 hover:border-gray-400 text-gray-600"}`,children:k},y))})]}),e.jsx("div",{className:`p-3 mt-6 h-[4rem] flex items-center overflow-y-auto rounded-lg border-l-4 ${l?"bg-green-100 border-green-600":"bg-blue-50 border-blue-500"}`,children:l?e.jsx("p",{className:"text-sm text-green-900 font-bold animate-pulse",children:a}):e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Did you know?"})," ",j]})})]}),e.jsxs("div",{className:"absolute bottom-8 left-8 right-8 flex gap-3",children:[t>0&&e.jsx("button",{onClick:N,className:"px-6 py-2 border-2 border-gray-300 hover:bg-gray-50 rounded-lg font-medium transition-colors",children:"Previous"}),e.jsxs("div",{className:"flex gap-3 ml-auto",children:[e.jsx("button",{onClick:x,className:"px-6 py-2 border-2 border-gray-300 hover:bg-gray-50 rounded-lg font-medium transition-colors",children:"Skip"}),i[f.qid]!==void 0&&e.jsx("button",{onClick:u,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:t<r.length-1?"Next":"Continue"})]})]})]})]})})},Ce=({importance:s,issueBuckets:r,onSetImportance:t,onContinue:i,onBack:o})=>{const l=p.useMemo(()=>100-Object.values(s).reduce((m,x)=>m+x,0),[s]),a=p.useMemo(()=>[...r].sort((m,x)=>{const u=s[m.id]||0;return(s[x.id]||0)-u}),[r,s]),b=(m,x)=>{const u=s[m]||0,N=Math.max(0,Math.min(100,u+x)),v=N-u;v>0&&l>=v?t({...s,[m]:N}):v<0&&t({...s,[m]:N})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"What Matters Most to You?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Distribute 100 points across these issues. Give more points to issues that are most important to you. Your priorities will personalize your results."}),e.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-800 font-semibold mb-1",children:"POINTS REMAINING"}),e.jsx("div",{className:"text-5xl font-bold text-blue-900",children:l})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>{const m=Math.floor(100/r.length),x={};r.forEach((u,N)=>{x[u.id]=N===0?m+(100-m*r.length):m}),t(x)},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-lg transition-colors",children:"Distribute Equally"}),e.jsx("button",{onClick:()=>t({}),className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-semibold rounded-lg transition-colors",children:"Clear All"})]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:a.map((m,x)=>{const u=s[m.id]||0,N=u;return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${u>0?"bg-red-600 text-white":"bg-gray-300 text-gray-600"}`,children:x+1}),e.jsx("div",{className:"flex-1",children:e.jsx("label",{className:"font-semibold text-gray-900",children:m.label})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(m.id,-5),disabled:u===0,className:"w-8 h-8 flex items-center justify-center bg-gray-200 hover:bg-gray-300 disabled:opacity-30 disabled:cursor-not-allowed rounded-lg font-bold text-gray-700 transition-colors",children:"−"}),e.jsx("div",{className:"w-16 text-center",children:e.jsx("span",{className:"text-2xl font-bold text-red-600",children:u})}),e.jsx("button",{onClick:()=>b(m.id,5),disabled:l<5,className:"w-8 h-8 flex items-center justify-center bg-red-600 hover:bg-red-700 disabled:opacity-30 disabled:cursor-not-allowed text-white rounded-lg font-bold transition-colors",children:"+"})]})]}),e.jsx("div",{className:"ml-11 relative",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-3 rounded-full transition-all duration-300 ease-out",style:{width:`${N}%`}})})})]},m.id)})}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded mb-6",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Tip:"})," You don't need to use all 100 points. Only allocate points to issues that matter to you. Unallocated points mean those issues won't affect your results as much."]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:o,className:"px-6 py-3 border-2 border-gray-300 hover:bg-gray-50 rounded-lg font-semibold text-gray-700 transition-colors",children:"Back to Questions"}),e.jsx("button",{onClick:i,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:"Continue"})]})]})})})},Te=({knowledgeQuiz:s,knowledgeAnswers:r,onUpdateAnswer:t,onComplete:i})=>{const[o,l]=p.useState(0),a=s[o];if(!a)return null;const b=r[a.qid],m=()=>{o<s.length-1?l(x=>x+1):i()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-4 py-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"inline-block px-3 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full mb-4",children:["KNOWLEDGE CHECK ",o+1," of ",s.length]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:a.text})]}),e.jsx("div",{className:"space-y-3",children:a.options.map((x,u)=>e.jsx("button",{onClick:()=>t(a.qid,u),className:`w-full py-4 px-6 rounded-lg border-2 transition-all duration-200 text-left font-medium ${b===u?"border-purple-600 bg-purple-50 text-purple-900":"border-gray-200 hover:border-purple-300 hover:bg-purple-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${b===u?"border-purple-600 bg-purple-600":"border-gray-300"}`,children:b===u&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{children:x})]})},u))}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:m,className:"px-6 py-2 border-2 border-gray-300 hover:bg-gray-50 rounded-lg font-medium transition-colors",children:"Skip"}),b!==void 0&&e.jsx("button",{onClick:m,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:o<s.length-1?"Next":"Continue"})]})]})})})},_e=({consentToShare:s,onToggleConsent:r,onSubmit:t,onSkip:i})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-3xl w-full bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Help Improve Canadian Political Research"}),e.jsxs("div",{className:"space-y-4 mb-6 text-gray-700",children:[e.jsx("p",{className:"text-lg",children:"You've completed the survey! Before we show your results, would you like to contribute your anonymized responses to help improve political research in Canada?"}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"What WILL be collected (if you consent):"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-900",children:[e.jsx("li",{children:"Your province"}),e.jsx("li",{children:"Your responses to all survey questions"}),e.jsx("li",{children:"Which questions you marked as important"}),e.jsx("li",{children:"Your priority issue rankings"}),e.jsx("li",{children:"Your past voting behavior (2021)"}),e.jsx("li",{children:"Your calculated political positioning"}),e.jsx("li",{children:"Timestamp of submission"})]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 rounded",children:[e.jsx("h3",{className:"font-bold text-green-900 mb-2",children:"What will NOT be collected:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-green-900",children:[e.jsx("li",{children:"No IP addresses"}),e.jsx("li",{children:"No email addresses or names"}),e.jsx("li",{children:"No device identifiers or fingerprints"}),e.jsx("li",{children:"No cookies or tracking pixels"}),e.jsx("li",{children:"No session IDs that could identify you"}),e.jsx("li",{children:"No personally identifiable information of any kind"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:o=>r(o.target.checked),className:"mt-1 w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"I consent to sharing my anonymized survey responses for research purposes as described above. I understand that no personally identifiable information will be collected."})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:i,className:"flex-1 py-4 px-6 border-2 border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-semibold transition-colors",children:"No Thanks, Show My Results"}),e.jsx("button",{onClick:t,className:`flex-1 py-4 px-6 rounded-lg font-semibold transition-colors ${s?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!s,children:s?"Submit & See Results":"Please Check Box Above"})]})]})}),Re="https://axorc.substack.com",q=(s,r=.12)=>{if(!s||typeof s!="string")return`rgba(15, 23, 42, ${r})`;let t=s.replace("#","");t.length===3&&(t=t.split("").map(b=>b+b).join(""));const i=parseInt(t.slice(0,6),16),o=i>>16&255,l=i>>8&255,a=i&255;return`rgba(${o}, ${l}, ${a}, ${r})`},ee=({party:s,index:r})=>{var o;const t=s.color||"#0f172a",i=Number.isFinite(s.alignment)?Math.min(Math.max(s.alignment,0),100):0;return e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border shadow-sm",style:{borderColor:t,background:q(t,.12)},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold",style:{backgroundColor:t},children:r+1}),s.logo?e.jsx("img",{src:s.logo,alt:`${s.name} logo`,className:"w-12 h-12 rounded-full bg-white object-contain p-1 shadow-sm"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-white text-gray-500 flex items-center justify-center font-semibold shadow-sm",children:((o=s.name)==null?void 0:o.charAt(0))??"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-gray-900",children:[e.jsx("span",{children:s.name}),e.jsxs("span",{children:[i.toFixed(0),"% match"]})]}),e.jsx("div",{className:"w-full bg-white/70 rounded-full h-2 mt-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${i}%`,backgroundColor:t}})})]})]})},Oe=({results:s,responses:r,questions:t,province:i,parties:o,provincialParties:l,pastVote2021:a,dataSubmitted:b,onRestart:m})=>{const{axisScores:x,partyDistances:u,provincialPartyDistances:N,confidence:v,consistencyIssues:f}=s,_=p.useMemo(()=>t.filter(n=>n.jurisdiction==="federal").length,[t]),S=p.useMemo(()=>t.filter(n=>n.jurisdiction==="provincial").length,[t]),h=p.useMemo(()=>Object.entries(u).sort(([,n],[,c])=>c.alignment-n.alignment).map(([n,c])=>{var E,C,P;return{code:n,name:((E=o[n])==null?void 0:E.name)||n,alignment:c.alignment,color:(C=o[n])==null?void 0:C.color,logo:(P=o[n])==null?void 0:P.logo}}),[u,o]),j=p.useMemo(()=>{const n=l[i]||{};return Object.entries(N).sort(([,c],[,E])=>E.alignment-c.alignment).map(([c,E])=>{var C,P,I;return{code:c,name:((C=n[c])==null?void 0:C.name)||c,alignment:E.alignment,color:(P=n[c])==null?void 0:P.color,logo:(I=n[c])==null?void 0:I.logo}})},[N,l,i]),M=p.useMemo(()=>[{name:"You",x:x.economic_model||0,y:x.social_values||0,z:20,color:"#EF4444"},...Object.entries(o).map(([n,c])=>({name:c.name,x:c.economic_model,y:c.social_values,z:15,color:c.color}))],[x,o]),y=p.useMemo(()=>{if(!h.length)return"";const n=a&&!a.includes("not")&&!a.includes("Prefer")?`
(I voted ${a} in 2021)`:"";return`I just took the Canadian Vote Spectrum quiz!

My top matches:
${h.slice(0,3).map((E,C)=>`${C+1}. ${E.name} - ${E.alignment.toFixed(0)}%`).join(`
`)}${n}

Find out where you stand on Canadian politics!

@northernvariables`},[h,a]),k=()=>{const n=`https://threads.net/intent/post?text=${encodeURIComponent(y)}`;window.open(n,"_blank","noopener,noreferrer")},w=()=>{const n=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Re)}&quote=${encodeURIComponent(y)}`;window.open(n,"_blank","noopener,noreferrer")},R=()=>{navigator.clipboard.writeText(y).then(()=>{alert("Results copied to clipboard!")}).catch(()=>{alert("Failed to copy results. Please try again.")})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 p-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[b&&e.jsxs("div",{className:"mb-6 bg-green-100 border-2 border-green-600 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-green-800",children:"Thank you for contributing to Canadian political research!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your anonymized responses have been securely submitted. This helps us understand Canadian political trends."})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Results"}),e.jsxs("p",{className:"text-gray-600",children:["Based on your responses to ",Object.keys(r).length," questions (",_," federal",S>0?`, ${S} ${i} provincial`:"",")"]})]}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-semibold ${v==="high"?"bg-green-100 text-green-800":v==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[v.toUpperCase()," CONFIDENCE"]})]}),h.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"p-6 rounded-xl shadow-lg border-4 text-center",style:{borderColor:h[0].color,backgroundColor:q(h[0].color,.12)},children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"YOUR TOP FEDERAL MATCH"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:h[0].color},children:"#1"}),h[0].logo&&e.jsx("img",{src:h[0].logo,alt:`${h[0].name} logo`,className:"w-12 h-12 rounded-full bg-white object-contain p-1 shadow"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:h[0].color},children:h[0].name}),e.jsxs("div",{className:"text-lg font-semibold text-gray-700",children:[h[0].alignment.toFixed(0),"% match"]})]})]})]}),S>0&&j.length>0&&e.jsxs("div",{className:"p-6 rounded-xl shadow-lg border-4 text-center",style:{borderColor:j[0].color,backgroundColor:q(j[0].color,.12)},children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:["YOUR TOP ",i," PROVINCIAL MATCH"]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:j[0].color},children:"#1"}),j[0].logo&&e.jsx("img",{src:j[0].logo,alt:`${j[0].name} logo`,className:"w-12 h-12 rounded-full bg-white object-contain p-1 shadow"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:j[0].color},children:j[0].name}),e.jsxs("div",{className:"text-lg font-semibold text-gray-700",children:[j[0].alignment.toFixed(0),"% match"]})]})]})]})]}),a&&!a.includes("not")&&!a.includes("Prefer")&&h.length>0&&e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl border-2 border-purple-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"How Your Views Have Evolved"}),e.jsxs("p",{className:"text-gray-700 mb-2",children:["In 2021, you voted ",e.jsx("strong",{children:a}),"."]}),e.jsx("p",{className:"text-gray-700",children:h[0].name===a?e.jsxs("span",{className:"text-green-700 font-semibold",children:["Your top match is still ",a,"! Your views appear consistent with your past voting behavior."]}):e.jsxs("span",{className:"text-blue-700 font-semibold",children:["Your top match is now ",h[0].name,". Your political positioning may have shifted since 2021, or your priorities may have changed in response to current issues."]})})]}),f.length>0&&e.jsxs("div",{className:"mb-8 bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-900 mb-2",children:"Consistency Note"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-yellow-800",children:f.map((n,c)=>e.jsx("li",{children:n},c))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Federal Party Alignment"}),e.jsx(B,{width:"100%",height:300,children:e.jsxs(K,{data:h,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"name",angle:-15,textAnchor:"end",height:70,interval:0}),e.jsx(W,{domain:[0,100]}),e.jsx(z,{formatter:n=>`${Number(n).toFixed(0)}%`}),e.jsx(Q,{}),e.jsx(G,{dataKey:"alignment",name:"Alignment %",children:h.map(n=>e.jsx(Y,{fill:n.color},n.code))})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Provincial Party Alignment"}),e.jsx(B,{width:"100%",height:300,children:e.jsxs(K,{data:j,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(V,{dataKey:"name",angle:-15,textAnchor:"end",height:70,interval:0}),e.jsx(W,{domain:[0,100]}),e.jsx(z,{formatter:n=>`${Number(n).toFixed(0)}%`}),e.jsx(Q,{}),e.jsx(G,{dataKey:"alignment",name:"Alignment %",children:j.map(n=>e.jsx(Y,{fill:n.color},n.code))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Axis Details"}),e.jsx("div",{className:"space-y-3",children:Object.entries(x).map(([n,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:n.replace(/_/g," ").toUpperCase()}),e.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-2 ${c>=0?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(1,Math.abs(c))*100}%`}})}),e.jsxs("span",{className:"text-sm font-bold",style:{color:c<0?"#2563EB":"#DC2626"},children:[c>0?"+":"",(c*100).toFixed(0)]})]},n))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Political Spectrum Position"}),e.jsx(B,{width:"100%",height:320,children:e.jsxs(ae,{children:[e.jsx(F,{}),e.jsx(V,{type:"number",dataKey:"x",name:"Economic Model",domain:[-1,1]}),e.jsx(W,{type:"number",dataKey:"y",name:"Social Values",domain:[-1,1]}),e.jsx(ie,{type:"number",dataKey:"z",range:[60,200]}),e.jsx(z,{cursor:{strokeDasharray:"3 3"}}),e.jsx(de,{data:M,shape:"circle",children:M.map(n=>e.jsx(Y,{fill:n.color},n.name))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Federal Alignment Details"}),e.jsx("div",{className:"space-y-4",children:h.map((n,c)=>e.jsx(ee,{party:n,index:c},n.code))}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Provincial Alignment Details"}),e.jsx("div",{className:"space-y-4",children:j.map((n,c)=>e.jsx(ee,{party:n,index:c},n.code))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Axis Positions"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(x).slice(0,8).map(([n,c])=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:n.replace(/_/g," ").toUpperCase()}),e.jsxs("div",{className:"text-2xl font-bold",style:{color:c<-.3?"#3B82F6":c>.3?"#EF4444":"#6B7280"},children:[c>0?"+":"",(c*100).toFixed(0)]})]},n))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl shadow-xl p-8 mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 text-center",children:"Share Your Results"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Let others know where you stand on the political spectrum!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-3 px-6 py-3 bg-black hover:bg-gray-800 text-white font-semibold rounded-lg transition-colors shadow-lg",children:[e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.186 3.5c-3.763 0-6.815 3.052-6.815 6.815 0 1.546.516 2.97 1.384 4.113L4.5 20.5l6.072-2.255c1.143.868 2.567 1.384 4.113 1.384 3.763 0 6.815-3.052 6.815-6.815S15.949 3.5 12.186 3.5zm0 11.13c-2.38 0-4.315-1.935-4.315-4.315s1.935-4.315 4.315-4.315 4.315 1.935 4.315 4.315-1.935 4.315-4.315 4.315z"})}),"Share to Threads"]}),e.jsxs("button",{onClick:w,className:"flex items-center justify-center gap-3 px-6 py-3 bg-[#1877F2] hover:bg-[#166FE5] text-white font-semibold rounded-lg transition-colors shadow-lg",children:[e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Share to Facebook"]}),e.jsxs("button",{onClick:R,className:"flex items-center justify-center gap-3 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white font-semibold rounded-lg transition-colors shadow-lg",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Results"]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:m,className:"px-8 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition-colors",children:"Start Over"})})]})]})})},te={screen:"welcome",province:"",responses:{},questionImportance:{},importance:{},knowledgeAnswers:{},pastVote2021:"",currentQuestionIndex:0,milestoneFlags:{25:!1,50:!1,75:!1},showMilestone:!1,milestoneMessage:"",consentToShare:!1,dataSubmitted:!1},d={SET_SCREEN:"SET_SCREEN",SET_PROVINCE:"SET_PROVINCE",SET_PAST_VOTE:"SET_PAST_VOTE",UPDATE_RESPONSE:"UPDATE_RESPONSE",SET_RESPONSES:"SET_RESPONSES",TOGGLE_IMPORTANCE:"TOGGLE_IMPORTANCE",SET_IMPORTANCE:"SET_IMPORTANCE",SET_KNOWLEDGE_ANSWER:"SET_KNOWLEDGE_ANSWER",SET_CURRENT_QUESTION:"SET_CURRENT_QUESTION",SHOW_MILESTONE:"SHOW_MILESTONE",HIDE_MILESTONE:"HIDE_MILESTONE",MARK_MILESTONE:"MARK_MILESTONE",SET_CONSENT:"SET_CONSENT",SET_DATA_SUBMITTED:"SET_DATA_SUBMITTED",RESET:"RESET"},ke=(s,r)=>{switch(r.type){case d.SET_SCREEN:return{...s,screen:r.payload};case d.SET_PROVINCE:return{...s,province:r.payload};case d.SET_PAST_VOTE:return{...s,pastVote2021:r.payload};case d.UPDATE_RESPONSE:return{...s,responses:{...s.responses,[r.payload.qid]:r.payload.value}};case d.SET_RESPONSES:return{...s,responses:r.payload};case d.TOGGLE_IMPORTANCE:return{...s,questionImportance:{...s.questionImportance,[r.payload.qid]:r.payload.value}};case d.SET_IMPORTANCE:return{...s,importance:r.payload};case d.SET_KNOWLEDGE_ANSWER:return{...s,knowledgeAnswers:{...s.knowledgeAnswers,[r.payload.qid]:r.payload.value}};case d.SET_CURRENT_QUESTION:return{...s,currentQuestionIndex:r.payload};case d.SHOW_MILESTONE:return{...s,showMilestone:!0,milestoneMessage:r.payload};case d.HIDE_MILESTONE:return{...s,showMilestone:!1};case d.MARK_MILESTONE:return{...s,milestoneFlags:{...s.milestoneFlags,[r.payload]:!0}};case d.SET_CONSENT:return{...s,consentToShare:r.payload};case d.SET_DATA_SUBMITTED:return{...s,dataSubmitted:r.payload};case d.RESET:return{...te,screen:"welcome"};default:return s}};var L={};const Pe=()=>typeof window<"u"&&window.__VOTE_SPECTRUM_CONFIG__?window.__VOTE_SPECTRUM_CONFIG__.consentWebhookUrl||"":typeof process<"u"&&L&&(L.VOTE_SPECTRUM_WEBHOOK_URL||L.REACT_APP_VOTE_SPECTRUM_WEBHOOK_URL||L.NEXT_PUBLIC_VOTE_SPECTRUM_WEBHOOK_URL)||"";function Ae({data:s}){const[r,t]=p.useReducer(ke,te),[i,o]=p.useState("en"),{screen:l,province:a,responses:b,questionImportance:m,importance:x,knowledgeAnswers:u,pastVote2021:N,currentQuestionIndex:v,showMilestone:f,consentToShare:_,dataSubmitted:S}=r,h=(s==null?void 0:s.allQuestions)||[],j=(s==null?void 0:s.knowledgeQuiz)||[],M=(s==null?void 0:s.issueBuckets)||[],y=(s==null?void 0:s.parties)||{},k=(s==null?void 0:s.provincialParties)||{},w=p.useMemo(()=>h?h.filter(g=>g.jurisdiction==="federal"?!0:g.jurisdiction==="provincial"?a?g.province_gate&&Array.isArray(g.province_gate)?g.province_gate.includes(a):!0:!1:!0):[],[h,a]),R=p.useCallback(()=>{const g={},T={},$={};return Object.values(y||{}).forEach(O=>{T[O.code]={party:O.name,alignment:0,color:O.color,logo:O.logo}}),Object.entries(b).forEach(([O,A])=>{w.find(le=>le.qid===O)}),{axisScores:g,partyDistances:T,provincialPartyDistances:$,confidence:75,consistencyIssues:[]}},[a,w,b,m,y]),n=p.useMemo(()=>R(),[R]),c=p.useCallback(()=>{v<w.length-1?t({type:d.SET_CURRENT_QUESTION,payload:v+1}):t({type:d.SET_SCREEN,payload:"importance"})},[v,w.length]),E=p.useCallback(()=>{v>0&&t({type:d.SET_CURRENT_QUESTION,payload:v-1})},[v]),C=p.useCallback(()=>{t({type:d.RESET}),t({type:d.SET_SCREEN,payload:"province"})},[]),P=p.useCallback(async()=>{if(!_){t({type:d.SET_SCREEN,payload:"results"});return}const g=Pe();if(!g){t({type:d.SET_SCREEN,payload:"results"});return}const{axisScores:T,partyDistances:$}=R(),O={timestamp:new Date().toISOString(),province:a,responses:b,questionImportance:m,importanceWeights:x,knowledgeAnswers:u,pastVote2021:N,axisScores:T,topThreeParties:Object.entries($).sort(([,A],[,D])=>D.alignment-A.alignment).slice(0,3).map(([A,D])=>({party:A,alignment:D.alignment}))};try{(await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).ok&&t({type:d.SET_DATA_SUBMITTED,payload:!0})}catch(A){console.error("Error submitting data:",A)}t({type:d.SET_SCREEN,payload:"results"})},[_,R,a,b,m,x,u,N]),I=j&&j.length>0;return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(ge,{linkTo:"artifacts"}),e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx("button",{type:"button",onClick:()=>o(g=>g==="en"?"fr":"en"),className:"px-4 py-2 rounded-full bg-white/90 border border-gray-300 shadow hover:bg-white transition-colors text-sm font-semibold min-touch",children:i==="en"?"Français":"English"})}),e.jsxs("main",{className:"flex-1",children:[l==="welcome"&&e.jsx(fe,{onStart:()=>t({type:d.SET_SCREEN,payload:"province"})}),l==="province"&&e.jsx(je,{onSelectProvince:g=>{t({type:d.SET_PROVINCE,payload:g}),t({type:d.SET_SCREEN,payload:"past-vote"})}}),l==="past-vote"&&e.jsx(ve,{pastVote2021:N,onSelectPastVote:g=>t({type:d.SET_PAST_VOTE,payload:g}),onContinue:()=>{t({type:d.SET_CURRENT_QUESTION,payload:0}),t({type:d.SET_SCREEN,payload:"questions"})}}),l==="questions"&&e.jsx(Se,{province:a,questions:w,currentQuestionIndex:v,responses:b,questionImportance:m,showMilestone:f,milestoneMessage:r.milestoneMessage,onToggleImportance:(g,T)=>t({type:d.TOGGLE_IMPORTANCE,payload:{qid:g,value:T}}),onResponseChange:(g,T)=>t({type:d.UPDATE_RESPONSE,payload:{qid:g,value:T}}),onSkip:c,onNext:c,onPrevious:E,onRestart:C}),l==="importance"&&e.jsx(Ce,{importance:x,issueBuckets:M,onSetImportance:g=>t({type:d.SET_IMPORTANCE,payload:g}),onContinue:()=>t({type:d.SET_SCREEN,payload:I?"knowledge":"consent"}),onBack:()=>t({type:d.SET_SCREEN,payload:"questions"})}),l==="knowledge"&&I&&e.jsx(Te,{knowledgeQuiz:j,knowledgeAnswers:u,onUpdateAnswer:(g,T)=>t({type:d.SET_KNOWLEDGE_ANSWER,payload:{qid:g,value:T}}),onComplete:()=>t({type:d.SET_SCREEN,payload:"consent"})}),l==="consent"&&e.jsx(_e,{consentToShare:_,onToggleConsent:()=>t({type:d.SET_CONSENT,payload:!_}),onSubmit:P,onSkip:()=>t({type:d.SET_SCREEN,payload:"results"})}),l==="results"&&e.jsx(Oe,{province:a,results:n,responses:b,questions:w,parties:y,provincialParties:k,pastVote2021:N,dataSubmitted:S,onRestart:C})]}),e.jsx(be,{})]})}function Me(){const[s,r]=p.useState(null),[t,i]=p.useState(null);return p.useEffect(()=>{(async()=>{try{const[l,a]=await Promise.all([fetch("/vote-spectrum-data.json"),fetch("/translations-fr.json").catch(()=>null)]);if(!l.ok)throw new Error("Failed to load data");const b=await l.json(),m={};if(a&&a.ok)try{m.fr=await a.json()}catch(x){console.warn("Unable to parse French translations",x)}r({...b,translations:m})}catch(l){console.error("Error loading Vote Spectrum data",l),i(l)}})()},[]),t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Unable to load Vote Spectrum"}),e.jsx("p",{className:"text-gray-300",children:"Please refresh the page or try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-5 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold min-touch",children:"Retry"})]})}):s?e.jsx(Ae,{data:s}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-300",children:"Loading Vote Spectrum experience..."})]})})}H.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(Me,{})}));
//# sourceMappingURL=index.yF32Eh1f.js.map
